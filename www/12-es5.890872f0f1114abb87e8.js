function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var c=n[e];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(t,c.key,c)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{"7wo0":function(t,n,e){"use strict";e.r(n);var c=e("M0ag"),i=e("tyNb"),r=e("ey9i"),a=e("H+bZ"),o=e("ntpF"),s=e("fXoL"),l=e("1kSV"),b=e("3Pt+"),u=e("5eHb"),d=e("sYmb"),f=e("ofXK"),v=e("oZhZ");function m(t,n){if(1&t&&(s.Zb(0,"div",4),s.Rc(1,"\n    "),s.Ub(2,"label",5),s.Rc(3,"\n    "),s.Zb(4,"div",6),s.Rc(5,"\n      "),s.Ub(6,"input",7),s.Rc(7,"\n    "),s.Yb(),s.Rc(8,"\n  "),s.Yb()),2&t){var e=s.pc(2);s.Fb(2),s.wc("translate",e.setting.Name)}}function g(t,n){if(1&t&&(s.Zb(0,"div",4),s.Rc(1,"\n    "),s.Ub(2,"label",5),s.Rc(3,"\n    "),s.Zb(4,"div",6),s.Rc(5,"\n      "),s.Ub(6,"input",7),s.Rc(7,"\n    "),s.Yb(),s.Rc(8,"\n  "),s.Yb()),2&t){var e=s.pc(2);s.Fb(2),s.wc("translate",e.setting.Name)}}function p(t,n){if(1&t&&(s.Zb(0,"div",4),s.Rc(1,"\n    "),s.Ub(2,"label",5),s.Rc(3,"\n    "),s.Zb(4,"div",6),s.Rc(5,"\n      "),s.Ub(6,"input",8),s.Rc(7,"\n    "),s.Yb(),s.Rc(8,"\n  "),s.Yb()),2&t){var e=s.pc(2);s.Fb(2),s.wc("translate",e.setting.Name)}}function R(t,n){if(1&t&&(s.Zb(0,"div",4),s.Rc(1,"\n    "),s.Ub(2,"label",5),s.Rc(3,"\n    "),s.Zb(4,"div",6),s.Rc(5,"\n      "),s.Ub(6,"input",9),s.Rc(7,"\n    "),s.Yb(),s.Rc(8,"\n  "),s.Yb()),2&t){var e=s.pc(2);s.Fb(2),s.wc("translate",e.setting.Name)}}function h(t,n){if(1&t&&(s.Zb(0,"div",10),s.Rc(1,"\n    "),s.Ub(2,"input",11),s.Rc(3,"\n    "),s.Ub(4,"label",12),s.Rc(5,"\n  "),s.Yb()),2&t){var e=s.pc(2);s.Fb(2),s.wc("id",e.setting.Name),s.Fb(2),s.wc("for",e.setting.Name),s.wc("translate",e.setting.Name)}}function y(t,n){if(1&t&&(s.Zb(0,"div",1),s.Rc(1,"\n  "),s.Pc(2,m,9,1,"div",2),s.Rc(3,"\n  "),s.Pc(4,g,9,1,"div",2),s.Rc(5,"\n  "),s.Pc(6,p,9,1,"div",2),s.Rc(7,"\n  "),s.Pc(8,R,9,1,"div",2),s.Rc(9,"\n  "),s.Pc(10,h,6,3,"div",3),s.Rc(11,"\n"),s.Yb()),2&t){var e=s.pc();s.vc("formGroupName",e.setting.Name),s.Fb(2),s.vc("ngIf","str"===e.setting.DataType),s.Fb(2),s.vc("ngIf","path"===e.setting.DataType),s.Fb(2),s.vc("ngIf","int"===e.setting.DataType),s.Fb(2),s.vc("ngIf","hex"===e.setting.DataType),s.Fb(2),s.vc("ngIf","bool"===e.setting.DataType)}}new r.c("SettingComponent");var k,w=((k=function(){function t(n,e,c){_classCallCheck(this,t),this.formBuilder=n,this.fgd=e,this.translate=c}return _createClass(t,[{key:"ngOnInit",value:function(){var t;t=this.formBuilder.group("hex"===this.setting.DataType?{current:["",b.t.compose([b.t.required,b.t.pattern("^[0-9A-Fa-f]+")])]}:"bool"===this.setting.DataType?{current:[]}:{current:["",b.t.required]}),this.fgd.form.addControl(this.setting.Name,t);var n=""!==this.setting.current_value?this.setting.current_value:this.setting.default_value;this.fgd.form.get(this.setting.Name).get("current").patchValue(n)}}]),t}()).\u0275fac=function(t){return new(t||k)(s.Tb(b.e),s.Tb(b.i),s.Tb(d.d))},k.\u0275cmp=s.Nb({type:k,selectors:[["app-setting"]],inputs:{setting:"setting",advanced:"advanced"},features:[s.Eb([],[{provide:b.b,useExisting:b.i}])],decls:2,vars:1,consts:[[3,"formGroupName",4,"ngIf"],[3,"formGroupName"],["class","form-group row mt-2",4,"ngIf"],["class","row mt-2 custom-control custom-checkbox",4,"ngIf"],[1,"form-group","row","mt-2"],["for","current",1,"col-sm-6","col-form-label",3,"translate"],[1,"col-sm"],["type","text","formControlName","current",1,"w-100","form-control"],["type","number","formControlName","current",1,"w-50","form-control"],["type","text","formControlName","current",1,"w-50","form-control"],[1,"row","mt-2","custom-control","custom-checkbox"],["formControlName","current","type","checkbox",1,"custom-control-input","form-control",3,"id"],[1,"ml-3","custom-control-label",3,"for","translate"]],template:function(t,n){1&t&&(s.Pc(0,y,12,6,"div",0),s.Rc(1,"\n")),2&t&&s.vc("ngIf",!1===n.setting.Advanced||n.advanced===n.setting.Advanced)},directives:[f.n,b.o,b.j,v.a,d.a,b.c,v.d,b.n,b.g,b.r,b.a],styles:[".custom-control-input.is-valid[_ngcontent-%COMP%] ~ .custom-control-label[_ngcontent-%COMP%], was-validated[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:valid ~ .custom-control-label[_ngcontent-%COMP%]{color:#000}"]}),k),Z=["content"];function Y(t,n){if(1&t&&(s.Xb(0),s.Rc(1,"\n                  "),s.Ub(2,"app-setting",24),s.Rc(3,"\n                "),s.Wb()),2&t){var e=n.$implicit,c=s.pc(4);s.Fb(2),s.vc("setting",e)("advanced",c.advanced)}}function C(t,n){if(1&t&&(s.Zb(0,"div",18),s.Rc(1,"\n            "),s.Ub(2,"div",19),s.Rc(3,"\n            "),s.Zb(4,"div",20),s.Rc(5,"\n              "),s.Zb(6,"div",21),s.Rc(7,"\n                "),s.Ub(8,"h5",22),s.Rc(9,"\n              "),s.Yb(),s.Rc(10,"\n              "),s.Zb(11,"div",23),s.Rc(12,"\n                "),s.Pc(13,Y,4,2,"ng-container",12),s.Rc(14,"\n              "),s.Yb(),s.Rc(15,"\n            "),s.Yb(),s.Rc(16,"\n          "),s.Yb()),2&t){var e=s.pc().$implicit;s.Fb(2),s.xc("translate","setting.header.",e._Theme,""),s.Fb(6),s.xc("translate","setting.subtitle.",e._Theme,""),s.Fb(5),s.vc("ngForOf",e.ListOfSettings)}}function F(t,n){if(1&t&&(s.Zb(0,"div"),s.Rc(1,"\n          "),s.Pc(2,C,17,3,"div",17),s.Rc(3,"\n        "),s.Yb()),2&t){var e=n.$implicit,c=s.pc(2);s.Fb(2),s.vc("ngIf",c.hasBasicSettings(e.ListOfSettings))}}function _(t,n){if(1&t){var e=s.ac();s.Zb(0,"form",9),s.Rc(1,"\n    "),s.Zb(2,"div",10),s.Rc(3,"\n      "),s.Zb(4,"div",11),s.Rc(5,"\n        "),s.Pc(6,F,4,1,"div",12),s.Rc(7,"\n      "),s.Yb(),s.Rc(8,"\n      "),s.Zb(9,"div",13),s.Rc(10,"\n        "),s.Zb(11,"button",14),s.lc("click",(function(t){return s.Ic(e),s.pc().updateSettings()})),s.Yb(),s.Rc(12,"\n      "),s.Yb(),s.Rc(13,"\n    "),s.Yb(),s.Rc(14,"\n\n    "),s.Zb(15,"div",10),s.Rc(16,"\n      "),s.Ub(17,"div",15),s.Rc(18,"\n      "),s.Zb(19,"div",13),s.Rc(20,"\n        "),s.Zb(21,"button",16),s.lc("click",(function(t){return s.Ic(e),s.pc().updateSettings()})),s.Yb(),s.Rc(22,"\n      "),s.Yb(),s.Rc(23,"\n    "),s.Yb(),s.Rc(24,"\n  "),s.Yb()}if(2&t){var c=s.pc();s.vc("formGroup",c.form),s.Fb(6),s.vc("ngForOf",c.settings),s.Fb(5),s.vc("disabled",!c.form.valid),s.Fb(10),s.vc("disabled",!c.form.valid)}}function S(t,n){1&t&&(s.Rc(0,"\n  "),s.Zb(1,"div",25),s.Rc(2,"\n    "),s.Ub(3,"h4",26),s.Rc(4,"\n    "),s.Zb(5,"button",27),s.lc("click",(function(t){return n.$implicit.dismiss("Cross click")})),s.Rc(6,"\n      "),s.Zb(7,"span",28),s.Rc(8,"\xd7"),s.Yb(),s.Rc(9,"\n    "),s.Yb(),s.Rc(10,"\n  "),s.Yb(),s.Rc(11,"\n  "),s.Ub(12,"div",29),s.Rc(13,"\n  "),s.Zb(14,"div",30),s.Rc(15,"\n    "),s.Zb(16,"button",31),s.lc("click",(function(t){return n.$implicit.dismiss("cancel")})),s.Yb(),s.Rc(17,"\n  "),s.Yb(),s.Rc(18,"\n"))}new r.c("SettingsComponent");var N,P,T=[{path:"",component:(N=function(){function t(n,e,c,i,r,a){_classCallCheck(this,t),this.modalService=n,this.apiService=e,this.formBuilder=c,this.toastr=i,this.headerService=r,this.translate=a,this.advanced=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.form=this.formBuilder.group({}),this.apiService.getSettings().subscribe((function(n){t.settings=n,t.settings.sort((function(t,n){return t._Order-n._Order}))}))}},{key:"advancedSettings",value:function(t){this.advanced=!!t.currentTarget.checked}},{key:"updateSettings",value:function(){var t=this;this.form.invalid?this.form.markAsTouched():(Object.keys(this.form.value).forEach((function(n){!0===t.form.value[n].current?t.form.value[n].current=1:!1===t.form.value[n].current&&(t.form.value[n].current=0)})),this.apiService.putSettings(this.form.value).subscribe((function(n){t.form.markAsPristine(),t.toastr.success(t.translate.instant("api.global.succes.update.title")),t.apiService.getSettings().subscribe((function(n){t.settings=n,t.settings.sort((function(t,n){return t._Order-n._Order}))})),t.apiService.getRestartNeeded().subscribe((function(n){n.RestartNeeded&&!0===n.RestartNeeded&&(t.headerService.setRestart(!0),t.open(t.content))}))})))}},{key:"open",value:function(t){this.modalService.open(t,{ariaLabelledBy:"modal-basic-title"}).result.then((function(t){}),(function(t){}))}},{key:"hasBasicSettings",value:function(t){return!!this.advanced||t.filter((function(t){return!1===t.Advanced})).length>0}}]),t}(),N.\u0275fac=function(t){return new(t||N)(s.Tb(l.e),s.Tb(a.a),s.Tb(b.e),s.Tb(u.b),s.Tb(o.a),s.Tb(d.d))},N.\u0275cmp=s.Nb({type:N,selectors:[["app-settings"]],viewQuery:function(t,n){var e;1&t&&s.Xc(Z,!0),2&t&&s.Ec(e=s.mc())&&(n.content=e.first)},decls:22,vars:2,consts:[[1,"h-100"],[1,"switch","switch-sm","mr-2","pr-2","float-right"],["type","checkbox","id","switch-advanced",1,"switch",3,"checked","click"],["for","switch-advanced","translate","setting.advanced.button",1,"mb-0"],["translate","setting.help.legend"],["href","https://github.com/pipiche38/Domoticz-Zigate-Wiki/blob/master/en-eng/PluginConf.json.md","translate","setting.help.link","target","_blank"],[1,"mt-3"],[3,"formGroup",4,"ngIf"],["content",""],[3,"formGroup"],[1,"row"],[1,"col-sm-11","card-columns"],[4,"ngFor","ngForOf"],[1,"col-sm-1"],["translate","setting.validate.button",1,"w-100","btn","btn-primary",3,"disabled","click"],[1,"col-sm"],["translate","setting.validate.button",1,"btn","btn-primary","w-100",3,"disabled","click"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header",3,"translate"],[1,"card-body"],[1,"card-title"],[3,"translate"],[1,"card-text"],[3,"setting","advanced"],[1,"modal-header"],["id","modal-basic-title","translate","setting.reloadplugin.alert.title",1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["translate","setting.reloadplugin.alert.subject",1,"modal-body"],[1,"modal-footer"],["type","button","translate","setting.reloadplugin.alert.cancel",1,"btn","btn-outline-dark",3,"click"]],template:function(t,n){1&t&&(s.Zb(0,"fieldset",0),s.Rc(1,"\n  "),s.Zb(2,"div",1),s.Rc(3,"\n    "),s.Zb(4,"input",2),s.lc("click",(function(t){return n.advancedSettings(t)})),s.Yb(),s.Rc(5,"\n    "),s.Ub(6,"label",3),s.Rc(7,"\n  "),s.Yb(),s.Rc(8,"\n\n  "),s.Ub(9,"legend",4),s.Rc(10,"\n  "),s.Ub(11,"a",5),s.Rc(12,"\n"),s.Yb(),s.Rc(13,"\n"),s.Zb(14,"div",6),s.Rc(15,"\n  "),s.Pc(16,_,25,4,"form",7),s.Rc(17,"\n"),s.Yb(),s.Rc(18,"\n\n"),s.Pc(19,S,19,0,"ng-template",null,8,s.Qc),s.Rc(21,"\n")),2&t&&(s.Fb(4),s.vc("checked",n.advanced),s.Fb(12),s.vc("ngIf",n.settings))},directives:[d.a,f.n,b.v,b.o,b.i,v.b,f.m,w],styles:[""]}),N),data:{title:Object(r.d)("settings")}}],O=((P=function t(){_classCallCheck(this,t)}).\u0275mod=s.Rb({type:P}),P.\u0275inj=s.Qb({factory:function(t){return new(t||P)},providers:[],imports:[[i.i.forChild(T)],i.i]}),P);e.d(n,"SettingsModule",(function(){return I}));var U,I=((U=function t(){_classCallCheck(this,t)}).\u0275mod=s.Rb({type:U}),U.\u0275inj=s.Qb({factory:function(t){return new(t||U)},imports:[[O,c.a]]}),U)}}]);